<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MAPA INTERACTIVO · SIEI</title>

<style>
  :root{
    --bg:#0f172a;
    --ink:#ffffff;
    --muted:#cbd5e1;
    --line:rgba(255,255,255,.14);
    --green:#22c55e;
    --shadow: 0 14px 40px rgba(0,0,0,.45);
    --radius: 18px;
  }

  *{ box-sizing:border-box; }

  body{
    margin:0;
    font-family: Arial, Helvetica, sans-serif;
    background: radial-gradient(1200px 800px at 10% 10%, #1a2a6a 0%, var(--bg) 55%) fixed;
    color: var(--ink);
  }

  .app{ max-width:1200px; margin:0 auto; padding:14px; }

  .layout{
    display:grid;
    grid-template-columns:380px 1fr;
    gap:14px;
  }
  @media (max-width:920px){
    .layout{ grid-template-columns:1fr; }
  }

  .card{
    background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
  }

  .left{ padding:16px; }

  .chip{
    display:inline-block;
    padding:6px 10px;
    border-radius:999px;
    background:rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.12);
    color:var(--muted);
    font-weight:900;
    font-size:12px;
    text-transform:uppercase;
    margin-bottom:10px;
  }

  #instrText{
    font-size:18px;
    font-weight:900;
    text-transform:uppercase;
    white-space:pre-line;
    margin-bottom:14px;
  }

  .btnRow{ display:flex; gap:10px; justify-content:flex-end; }

  button{
    border:0;
    border-radius:14px;
    padding:12px 14px;
    font-weight:900;
    cursor:pointer;
    background:rgba(255,255,255,.10);
    color:white;
  }

  button.primary{ background:#22c55e; color:#061f12; }

  .mapWrap{ position:relative; }
  #mapa{ width:100%; border-radius:14px; }

  .zona{ position:absolute; pointer-events:none; }

  .zona.active{
    pointer-events:auto;
    outline:4px solid var(--green);
    animation:pulse 1.1s infinite;
  }

  @keyframes pulse{
    0%{transform:scale(1)}
    50%{transform:scale(1.01)}
    100%{transform:scale(1)}
  }
</style>
</head>

<body>
<div class="app">
<div class="layout">

<section class="card left">
<div class="chip" id="chip">PASO 1</div>
<p id="instrText"></p>

<div class="btnRow">
<button id="btnPlay">▶ PLAY</button>
<button class="primary" id="btnContinue" style="display:none;">CONTINUAR</button>
</div>
</section>

<section class="card">
<div class="mapWrap">
<img src="mapa.jpg" id="mapa">

<div class="zona" id="zPistas" style="left:6%;top:18%;width:42%;height:32%"></div>
<div class="zona" id="zEntrada" style="left:45%;top:66%;width:10%;height:22%"></div>
<div class="zona" id="zClase" style="left:53.4%;top:69.6%;width:6.5%;height:11.7%"></div>

</div>
</section>

</div>
</div>

<script>
function speak(text){
 speechSynthesis.cancel();
 const u=new SpeechSynthesisUtterance(text);
 u.lang="es-ES";
 u.rate=0.92;
 speechSynthesis.speak(u);
}

const chip=document.getElementById("chip");
const text=document.getElementById("instrText");
const btnPlay=document.getElementById("btnPlay");
const btnContinue=document.getElementById("btnContinue");

const zClase=document.getElementById("zClase");
const zEntrada=document.getElementById("zEntrada");
const zPistas=document.getElementById("zPistas");

function clearZones(){
 [zClase,zEntrada,zPistas].forEach(z=>{
  z.classList.remove("active");
  z.style.pointerEvents="none";
 });
}

function setActiveZone(name){
 clearZones();
 if(name==="clase"){zClase.classList.add("active");zClase.style.pointerEvents="auto";}
 if(name==="entrada"){zEntrada.style.pointerEvents="auto";}
 if(name==="pistas"){zPistas.style.pointerEvents="auto";}
}

const scenes=[
{chip:"PASO 1",type:"action",active:"clase",text:`ESTO ES TU INSTITUTO VISTO DESDE EL CIELO.
TU CLASE ESTÁ MARCADA CON UN CUADRADO VERDE.
¿PUEDES HACER CLICK SOBRE TU CLASE?`},

{chip:"BIEN",type:"praise",text:"¡FELICIDADES! LO HAS HECHO BIEN. ESO ERA TU CLASE."},

{chip:"PASO 2",type:"action",active:"entrada",text:`AHORA BUSCA LA ENTRADA.
¿PUEDES HACER CLICK EN LA ENTRADA?`},

{chip:"BIEN",type:"praise",text:"¡FELICIDADES! LO HAS HECHO BIEN. POR AQUÍ ENTRAS CADA DÍA."},

{chip:"PASO 3",type:"action",active:"pistas",text:`AHORA BUSCA LAS PISTAS DEPORTIVAS.
¿PUEDES HACER CLICK EN LAS PISTAS?`},

{chip:"FINAL",type:"praise",text:`Y AHORA VAMOS A VER UN MAPA DEL BARRIO.`}
];

let i=0;

function render(){
 const s=scenes[i];
 chip.textContent=s.chip;
 text.textContent=s.text.toUpperCase();

 if(s.type==="action"){
  btnContinue.style.display="none";
  setActiveZone(s.active);
 }else{
  btnContinue.style.display="inline-block";
  clearZones();
 }
}

btnPlay.onclick=()=>speak(text.textContent);

btnContinue.onclick=()=>{
 if(scenes[i].chip==="FINAL"){
  window.location.href="barrio.html";
  return;
 }
 i++; render();
};

function correct(name){
 if(scenes[i].active===name){i++;render();}
}

zClase.onclick=()=>correct("clase");
zEntrada.onclick=()=>correct("entrada");
zPistas.onclick=()=>correct("pistas");

render();
</script>
</body>
</html>
